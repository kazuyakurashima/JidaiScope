# 013: Historical Data Preparation（Sprint 1）

## 概要

**目的:** MVP に必要な日本史データ（時代、イベント、人物、在位情報）を準備し、SQLite にインポート可能な形式で整備

**スコープ:**

- 時代区分データ（15区分）
- 主要イベント 800件（うち典拠付き 100件）
- 天皇 126代
- 将軍 45名（鎌倉/室町/江戸）
- 主要人物 200-300名
- JSON / CSV 形式でのデータ準備
- インポートスクリプト

**成功基準:**

- ✅ 時代区分 15件完成
- ✅ イベント 800件以上（典拠 100件含む）
- ✅ 天皇 126代完成
- ✅ 将軍 45名完成
- ✅ 人物 200名以上完成
- ✅ SQLite へのインポート成功

**注意:** この作業は最も時間がかかる。他チケットと並行して進行可能。

---

## ユーザーストーリー

```
As a ユーザー
I want to 正確で信頼できる日本史データにアクセスしたい
So that 学習や探索に役立てられる
```

---

## 受け入れ条件

| #   | 条件                                | 検証方法                   | 担当 |
| --- | ----------------------------------- | -------------------------- | ---- |
| 1   | 時代区分 15件（縄文〜令和）         | データ件数確認             | -    |
| 2   | イベント 800件以上                  | データ件数確認             | -    |
| 3   | 典拠付きイベント 100件              | source フィールド確認      | -    |
| 4   | 天皇 126代（初代〜今上天皇）        | データ件数確認             | -    |
| 5   | 将軍 45名                           | データ件数確認             | -    |
| 6   | 人物 200名以上                      | データ件数確認             | -    |
| 7   | SQLite インポート成功               | クエリで確認               | -    |

---

## 依存関係

| 種類             | 詳細                                    |
| ---------------- | --------------------------------------- |
| ✓ 入力依存       | 012 (Database Schema) 完了            |
| ✗ コード依存     | なし                                    |
| ✗ 他チケット依存 | なし（並行開発可）                      |
| ✓ 出力依存       | 033 (Source Display) は典拠データ依存   |

---

## Todo リスト

### Phase 1: 時代区分データ（0.5d）

- [ ] 15時代の定義
  - 縄文、弥生、古墳、飛鳥、奈良、平安
  - 鎌倉、室町、戦国、安土桃山、江戸
  - 明治、大正、昭和、平成、令和
- [ ] 各時代の開始年・終了年
- [ ] 時代カラー設定
- [ ] JSON 形式で出力

### Phase 2: 天皇データ（0.5d）

- [ ] 初代〜126代の天皇リスト
- [ ] 在位期間（開始年・終了年）
- [ ] Reign テーブル用データ
- [ ] JSON 形式で出力

### Phase 3: 将軍データ（0.5d）

- [ ] 鎌倉幕府将軍（9代）
- [ ] 室町幕府将軍（15代）
- [ ] 江戸幕府将軍（15代 + 大政奉還）
- [ ] 在任期間
- [ ] JSON 形式で出力

### Phase 4: 主要イベントデータ（1.5d）

- [ ] 各時代から主要イベント選定
  - [ ] 縄文〜古墳: 30件
  - [ ] 飛鳥〜平安: 100件
  - [ ] 鎌倉〜戦国: 150件
  - [ ] 安土桃山〜江戸: 200件
  - [ ] 明治〜令和: 320件
- [ ] イベント詳細（タイトル、日付、概要、タグ）
- [ ] importanceLevel 設定（L0〜L3）
- [ ] **典拠付き 100件の選定・入力**
- [ ] 関連人物・関連イベント ID 紐付け

### Phase 5: 主要人物データ（0.5d）

- [ ] 200-300名の選定
- [ ] 生没年、活動期間
- [ ] 概要、役職
- [ ] importanceLevel 設定

### Phase 6: インポートスクリプト

- [ ] data/seed/eras.json
- [ ] data/seed/events.json
- [ ] data/seed/persons.json
- [ ] data/seed/reigns.json
- [ ] scripts/seedDatabase.ts

### Phase 7: 検証

- [ ] 全データインポート成功
- [ ] 件数確認（時代、イベント、人物、在位）
- [ ] 典拠 100件の確認
- [ ] サンプルクエリ実行

---

## データソース

| データ種類   | 参考文献                              |
| ------------ | ------------------------------------- |
| 時代・年号   | 文科省教科書基準、Wikipedia           |
| イベント     | 山川出版社「詳説日本史」              |
| 天皇         | 宮内庁公式、Wikipedia                 |
| 将軍         | 各幕府公式記録、Wikipedia             |
| 典拠         | 山川出版社「詳説日本史」（100件）     |

---

## 典拠対象イベント選定基準

MVP で典拠を付ける 100件は以下の基準で選定：

1. **教科書必須**: 高校日本史教科書に必ず掲載
2. **入試頻出**: 大学入試で頻出のイベント
3. **ターニングポイント**: 時代を分ける重要な出来事
4. **因果関係**: 他イベントへの影響が大きい

### 典拠付きイベント例

| 時代     | イベント例                     |
| -------- | ------------------------------ |
| 飛鳥     | 大化の改新、壬申の乱           |
| 奈良     | 聖武天皇即位、遣唐使派遣       |
| 平安     | 平将門の乱、源平合戦           |
| 鎌倉     | 承久の乱、元寇                 |
| 室町     | 応仁の乱                       |
| 戦国     | 桶狭間の戦い、本能寺の変       |
| 江戸     | 関ヶ原の戦い、島原の乱、開国   |
| 明治〜   | 明治維新、日清・日露戦争、終戦 |

---

## データフォーマット

### events.json サンプル

```json
[
  {
    "id": "evt-meiji-ishin",
    "title": "明治維新",
    "startDate": "1868-01-03",
    "endDate": "1868-12-31",
    "summary": "江戸幕府が倒れ、天皇親政による近代国家への転換が始まった。",
    "tags": ["politics"],
    "importanceLevel": 3,
    "eraId": "era-meiji",
    "source": {
      "title": "山川 詳説日本史",
      "page": "254-258"
    },
    "relatedPersonIds": ["person-meiji-tenno", "person-saigo-takamori"],
    "relatedEventIds": ["evt-boshin-war", "evt-haihan-chiken"]
  }
]
```

---

## ファイル構成

```
data/
└── seed/
    ├── eras.json          # 15時代
    ├── events.json        # 800件イベント
    ├── persons.json       # 200-300人物
    └── reigns.json        # 天皇126代 + 将軍45名

scripts/
└── seedDatabase.ts        # インポートスクリプト
```

---

## 注意事項

### 品質重視

- 典拠 100件は教育現場で重要。正確性を最優先
- 年号・日付は複数ソースで確認
- 概要文は 100-200字で簡潔に

### 並行開発

- このチケットは他チケット（030, 020 等）と並行可能
- データが完成次第、随時インポート・テスト

### v1.1 での拡張

- 全イベントへの典拠追加は v1.1 で対応
- データ更新フロー（差分更新）は別途設計

---

**作成日:** 2025-01-25
**優先度:** P0 - Critical
**推定工数:** 3d
**ステータス:** Not Started
**ブロッカー:** 012 完了
